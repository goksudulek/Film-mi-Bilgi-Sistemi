el.set("checkbox",!s),o&&d.collectionsUiModel.set("view",o),(m||e.Features.isFeatureEnabled("no_collection_item_checkbox")&&h.hasQueryParam("no_collection_item_checkbox","1"))&&d.collectionsUiModel.set("checkbox",!1),this._initFilter(t),this._configureActions(M),this.render(),d.fileUploadUiModel.startListening(),l?(p.isFileOpen(l)||(p.close({silent:!0}),i.opFactory.create("OpeningFullPreviewOp",_.extend({},d,{id:l})).run()),void(m&&F.showSpinner(!1))):f.isConnectorPlugin(u)&&!f.getConnectorPluginRoot(u)?(h.navigate(M),m&&F.showSpinner(!1),this._getResolvedPromise()):d.noUrlUpdate&&f.isActionRestricted(M,U)?(w&&E&&(n=A.getSelectorApi(P),n&&n.getSelectorLabel&&(w=n.getSelectorLabel(),w&&""!==w||(w=a.toolIdsToActionNames[P])),r=_.template(m?g.UNSUPPORTED_CONNECTOR_MSG:c.UNSUPPORTED_CONNECTOR_MSG,{actionName:w,connectorLabel:E}),d.collectionsUiModel.set("force_empty_msg",r)),d.collectionsUiModel.set("force_empty",!0),d.sortUiModel.set("is_locked",!0),d.searchUiModel.set("is_locked",!0),m&&F.showSpinner(!1),this._getResolvedPromise()):(t&&(d=_.extend({},d,_.pick(t,"noHistoryEffect"))),this._runSearchOp(d))},this),_.bind(function(e){if(m){if(F.showSpinner(!1),e&&"NoAccessToPdfServices"===e.errorString)return C.removeSignedInChangeCallback(this._onSignedInChange),C.addSignedInChangeCallback(this._onSignedInChange),this._isSelected=!0,this.render(),this._getResolvedPromise();0===this.$el.children().length&&A.handleServerOutageFailure()}},this))},deselectPlugin:function(){var i=this.options,t=i.appApi.networkConnectivityApi;u.isCEF()&&t.removeNetworkOnlineChangeCallback(this._onOnlineChanged),e.PluginContentView.prototype.deselectPlugin.call(this),this._isSelected=!1},remove:function(){this.deselectPlugin(),e.PluginContentView.prototype.remove.call(this)},releasePlugin:function(){var e=this.options,i=this.options.appApi.folderApi;n.PluginView.prototype.releasePlugin.call(this),u.isCEF()&&(this._unsetPluginRoot(),i.setCurrentFolderId(e.pluginId,void 0),e.folderModel.unset("name"),this._pluginOptions=_.omit(this._pluginOptions,"routeFolderId","routeFilesFilters","routeFileId")),e.folderModel.unset("id"),e.searchUiModel.removeAllFieldQueries()},getSelectionUiModel:function(){return this.options.selectionUiModel},getPluginVersionList:function(){var e=[l.pluginBuildNumber],i=this.options.appApi.baseFilesUrisApi.getServerVersion();return i&&e.push(i),$.Deferred().resolve().promise(e)},getFilesFooterUrl:function(){var i=this.options,t=i.appApi.folderApi;return"root"===i.pluginId?e.opFactory.create("GettingSsoUriOp",i).run("folder/"+encodeURIComponent(t.getRootFolderId())):void 0},clickedOutsideAiCview:function(){return u.isCEF()&&(this._triggerViewEvent(e.ViewEvents.CLEAR_SELECTION),$(document.body).click()),this._getResolvedPromise()},getSiteCatalystName:function(){var e=this.options,i=e.appApi,t=e.pluginId;return i&&i.connectorsApi.isConnectorPlugin(t)?i.connectorsApi.getConnectorPluginScName(t):s.DOCUMENT_CLOUD},doesFileExists:function(e){var i,t,n,o,s,l=this.options,r=l.filesUiModel;return r.isFolderView()?i=l.folderModel.get("items"):l.filesUiModel.isSearchResultsView()&&(i=l.searchModel.get("items")),e&&i&&(e=e.toLowerCase(),s=h.getNormalizedString(e,"NFC"),_.isUndefined(s)||(e=s),n=i.models,t=_.find(n,function(i){return"file"===i.get("object_type")?(o=i.get("name").toLowerCase(),s=h.getNormalizedString(o,"NFC"),_.isUndefined(s)||(o=s),o===e):!1})),t},_runSearchOp:function(e){return this.options.isInSearchResultsView?(u.isCEF()&&this.options.appApi.displayApi.showSpinner(!1),$.Deferred().resolve().promise()):i.opFactory.create("SearchingIfAskedOp",e).run().done(_.bind(function(){if(e.noInitialViewCounts||this._seenInitialView||(this._seenInitialView=!0,this._logInitialViewCounts()),u.isCEF())if("root-select"===e.pluginId){var i=e.folderModel.get("loaded");i&&i===!0&&this.options.appApi.displayApi.showSpinner(!1)}else this.options.appApi.displayApi.showSpinner(!1)},this)).fail(_.bind(function(){u.isCEF()&&this.options.appApi.displayApi.showSpinner(!1)},this))},_onViewEvent:function(i,t){var n=this.options;return n.inFileSelectionDlg&&i===e.ViewEvents.SELECTION_COMMIT?void n.selectionUiModel.commitSelection():void this.trigger(i,t)},_renderChildViews:function(){if(this.options.forRecentFileListing){var t=_.template('<div class="files-rhp ui-theme theme-container">');this.$el.append(t()),this.$rhp=this.$(".files-rhp"),this.$cbView=this._renderChildView("_filesRhpView",i.FilesRhpView,this.$rhp,{forRecentFileList:!0,rhpPreviewUiModel:e.modelFactory.create("RhpPreviewUiModel")})}else this._renderChildView("_filesContainerView",i.FilesContainerView,this.$el)},_initPlugin:function(){var e,i,t=this._initingPluginPromise,n=this.options,s=n.pluginId,l=n.appApi.connectorsApi,r=s,a=g.CLOUD_NAME;return i=l.getConnectorUIName(s),i&&(a=i),e=_.template(g.NOTIFICATION_HEADING,{cloudName:a}),_.extend(this.options,{notificationHeading:e,notificatonCategory:r}),t||(t=this._initingPluginPromise=o.opFactory.create("InitializingPluginOp",this.options).run()),t},_startPlugin:function(){var e=this._startingPluginPromise,i=!1,t=!1;return this.options.forRecentFileListing?(this.render(),void this.options.appApi.displayApi.showSpinner(!1)):(e||(e=this._startingPluginPromise=o.opFactory.create("StartingPluginOp",this.options).run().then(_.bind(function(){this.options.noAcrobat||this._addAppApiCallbacks(),i=this.options.showFoldersInSearch===!0,t=i&&this.options.showNavigationAtRoot===!0,this.options.searchUiModel.set({should_show_folders:i,should_show_navigate_root:t},{silent:!0})},this))),e)},_configureAction:function(e,i,t){var n=this.options,o=n.appApi.connectors